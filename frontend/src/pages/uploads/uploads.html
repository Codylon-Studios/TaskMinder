<!doctype html>
<html lang="de">
  <head>
    <meta name="robots" content="noindex, follow" />
  </head>

  <body>
    <div id="app-scroll">
      <div class="container" id="app">
        <div class="d-flex gap-2 mb-3 align-items-center">
          <div class="progress w-100 position-relative" id="storage-bar" aria-label="Freier Speicher" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar fw-bold"></div>
            <span class="position-absolute top-50 start-50 translate-middle fw-bold text-secondary"></span>
          </div>
          <span class="text-secondary text-nowrap" id="storage-description">
            <b></b>
            von
            <b></b>
            belegt
          </span>
        </div>

        <div class="d-flex align-items-center flex-column flex-lg-row gap-3 mb-2">
          <div class="d-flex align-items-center flex-column flex-md-row gap-2 gap-md-3">
            <div class="d-flex gap-2">
              <button type="button" class="btn btn-primary fw-bold" id="show-add-upload-button">
                <i class="fa-solid fa-plus" aria-hidden="true"></i>
                Neu
              </button>
              <input type="checkbox" class="btn-check" id="edit-toggle" />
              <label class="btn btn-outline-secondary fw-bold" for="edit-toggle" id="edit-toggle-label">
                <i class="fa-solid fa-edit"></i>
                Bearbeiten
              </label>

              <input type="checkbox" class="btn-check" id="filter-toggle" />
              <label class="btn btn-outline-secondary position-relative fw-bold" for="filter-toggle">
                <i class="fa-solid fa-filter"></i>
                Filtern
                <span class="filter-info-circle" id="filter-changed"></span>
              </label>
            </div>
            <div id="filter-content" class="ds-flex align-items-center flex-row gap-2">
              <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle fw-semibold" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                  Art
                </button>
                <div class="dropdown-menu" id="filter-type-dropwdown">
                  <div class="px-2 py-0">
                    <button class="btn btn-outline-secondary btn-sm" id="filter-type-all">Alle</button>
                    <button class="btn btn-outline-secondary btn-sm" id="filter-type-none">Keine</button>
                  </div>
                  <div class="dropdown-divider"></div>
                  <div class="px-2 py-0" id="filter-type-list">
                    <!--Gets filled-->
                  </div>
                </div>
              </div>
              <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle fw-semibold" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                  Datum
                </button>
                <div class="dropdown-menu" id="filter-date-dropwdown">
                  <div class="px-2 py-1">
                    <div class="d-flex align-items-center mb-3">
                      <label class="mb-0 me-2 text-nowrap" for="filter-date-from">Von</label>
                      <input type="date" class="form-control form-control-sm filter-date" id="filter-date-from" />
                    </div>
                    <div class="d-flex align-items-center">
                      <label class="mb-0 me-2 text-nowrap" for="filter-date-until">Bis</label>
                      <input type="date" class="form-control form-control-sm filter-date" id="filter-date-until" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <button class="btn btn-secondary fw-bold" id="filter-reset">
              <i class="fa-solid fa-trash" aria-hidden="true"></i>
              Zurücksetzen
            </button>
          </div>

          <div class="d-flex justify-content-center justify-content-lg-start gap-3 flex-grow-1 w-100 w-lg-fit-content">
            <button class="btn btn-outline-secondary fw-bold" id="view-toggle"></button>
            <search-box id="search-uploads"></search-box>
          </div>
        </div>

        <div class="text-secondary mt-3" id="no-uploads-found">Keine Dateien mit diesen Filtern.</div>

        <div class="mt-3 row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-xl-6 mx-n2" id="upload-gallery">
          <!--Gets filled-->
        </div>

        <div class="rounded-3 overflow-hidden border mt-3" id="upload-table">
          <div class="table-responsive">
            <table class="table table-striped mb-0">
              <thead>
                <tr>
                  <th>Art</th>
                  <th>Name & Autor</th>
                  <th>Datum</th>
                  <th>Aktionen</th>
                </tr>
              </thead>
              <tbody class="table-group-divider" id="upload-table-body"><!--Gets filled--></tbody>
            </table>
          </div>
        </div>

        <div class="container-fluid text-center" id="upload-load-more">
          <button class="btn btn-primary fw-bold" id="upload-load-more-btn">Mehr laden</button>
        </div>

        <div class="modal fade" id="add-upload-modal" aria-labelledby="add-upload-modal-label">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="add-upload-modal-label">Dateien hochladen</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
              </div>
              <div class="modal-body">
                <div class="mb-3">
                  <label for="add-upload-name" class="form-label">Bennene die Dateien</label>
                  <input type="text" class="form-control add-upload-input" id="add-upload-name" placeholder='zum Beispiel "Mathe vom 30.11" ' />
                  <div class="autocomplete-feedback">Automatisch: Das aktuelle Fach & Datum</div>
                </div>

                <div class="alert alert-danger p-2 ds-flex align-items-center gap-2 mb-3" id="add-upload-max-files" style="display: none">
                  <i class="fa-solid fa-circle-exclamation mx-1" aria-hidden="true"></i>
                  <span class="d-block">Es können höchstens 20 Dateien gleichzeitig hochgeladen werden!</span>
                </div>

                <div class="mb-3">
                  <label for="add-upload-files" class="form-label">Wähle Dateien zum Hochladen aus</label>
                  <input type="file" class="form-control add-upload-files" id="add-upload-files" accept=".pdf, .jpg, .jpeg, .png, .txt" multiple />
                  <div class="form-text">Unterstütze Formate: PDF, JPG, PNG, TXT</div>
                  <div class="form-text">Du kannst das nachher nicht mehr ändern, nur alles löschen.</div>
                </div>

                <div class="mb-3">
                  <label for="add-upload-type" class="form-label">Wähle die Art der Datei aus</label>
                  <select class="form-select add-upload-input" id="add-upload-type">
                    <!--Gets filled-->
                  </select>
                  <div class="form-text">Das beeinflusst nur die Darstellung und Filter.</div>
                </div>

                <label for="add-upload-team" class="form-label">Wähle ein Team für die Datei aus (optional)</label>
                <select class="form-select add-upload-input" id="add-upload-team">
                  <option value="-1" selected>Alle</option>
                  <!-- Gets filled -->
                </select>
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary fw-bold" data-bs-dismiss="modal">Abbrechen</button>
                <button class="btn btn-primary fw-bold" id="add-upload-button">Hochladen</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="edit-upload-modal" aria-labelledby="edit-upload-modal-label">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="edit-upload-modal-label">Hochgeladene Dateien bearbeiten</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
              </div>
              <div class="modal-body">
                <div class="alert alert-warning p-2 d-flex align-items-center gap-2 mb-3">
                  <i class="fa-solid fa-triangle-exclamation mx-1" aria-hidden="true"></i>
                  <span class="d-block">
                    Du kannst nur Namen und ähnliches ändern. Wenn du die Dateien an sich anpassen willst, lösche bitte diesen Eintrag und mache einen
                    neuen.
                  </span>
                </div>

                <div class="mb-3">
                  <label for="edit-upload-name" class="form-label">Bennene die Dateien</label>
                  <input type="text" class="form-control edit-upload-input" id="edit-upload-name" placeholder='zum Beispiel "Mathe vom 30.11" ' />
                </div>

                <div class="mb-3">
                  <label for="add-upload-type" class="form-label">Wähle die Art der Datei aus</label>
                  <select class="form-select add-upload-input" id="edit-upload-type">
                    <!--Gets filled-->
                  </select>
                  <div class="form-text">Das beeinflusst nur die Darstellung und Filter.</div>
                </div>

                <label for="edit-upload-team" class="form-label">Wähle ein Team für die Datei aus (optional)</label>
                <select class="form-select edit-upload-input" id="edit-upload-team">
                  <option value="-1" selected>Alle</option>
                  <!-- Gets filled -->
                </select>
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary fw-bold" data-bs-dismiss="modal">Abbrechen</button>
                <button class="btn btn-primary fw-bold" id="edit-upload-button">Speichern</button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="view-upload-modal" aria-labelledby="view-upload-modal-label">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="view-upload-modal-label">
                  Datei:
                  <b></b>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
              </div>
              <div class="modal-body">
                <object id="view-upload-object">Placeholder</object>
                <div class="alert alert-danger p-2 ds-flex align-items-center gap-2 m-2" id="view-upload-offline">
                  <i class="fa-solid fa-circle-exclamation mx-1" aria-hidden="true"></i>
                  <span class="d-block">Du bist offline, du kannst keine Dateien ansehen.</span>
                </div>
                <div class="form-text" id="view-upload-first-page-note">Eventuell wird nur die erste Seite des PDFs angezeigt.</div>

                <div class="d-flex align-items-center justify-content-center gap-2 mb-2">
                  <button class="btn btn-tertiary rounded-pill position-relative p-3" id="view-upload-nav-back" aria-label="Vorherige Datei">
                    <i class="fas fa-arrow-left position-absolute top-50 start-50 translate-middle" aria-hidden="true"></i>
                  </button>
                  <span class="badge badge-tertiary rounded-pill fs-6" id="view-upload-nav-info">1/3</span>
                  <button class="btn btn-tertiary rounded-pill position-relative p-3" id="view-upload-nav-next" aria-label="Nächste Datei">
                    <i class="fas fa-arrow-right position-absolute top-50 start-50 translate-middle" aria-hidden="true"></i>
                  </button>
                </div>

                <div class="d-flex flex-column flex-md-row gap-2">
                  <a class="btn btn-primary fw-bold w-md-50" id="view-upload-download" download>
                    <i class="fas fa-download" aria-hidden="true"></i>
                    Herunterladen
                  </a>
                  <div class="form-text mt-0" id="view-upload-download-impossible">
                    Leider unterstützt iOS das Herunterladen von PDFs in einer Web-App nicht. Du musst den Link in einem Browser öffnen und dann auf
                    "Teilen" klicken.
                  </div>
                  <a class="btn btn-secondary fw-bold w-md-50" id="view-upload-open" target="_blank">
                    <i class="fas fa-arrow-up-right-from-square fs-6" aria-hidden="true"></i>
                    In neuem Tab öffnen
                  </a>
                </div>
              </div>
              <div class="modal-footer">
                <button class="btn btn-primary w-100 fw-bold" data-bs-dismiss="modal">Fertig</button>
              </div>
            </div>
          </div>
        </div>

        <div class="toast-container">
          <div id="add-upload-success-toast" class="toast">
            <div class="toast-progress-bar bg-primary"></div>
            <div class="toast-header bg-primary text-body-bg">
              <b class="me-auto">Dateien hochgeladen</b>
              <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
            </div>
            <div class="toast-body">Die Dateien wurden hochgeladen. Es kann kurz dauern, bis sie sichtbar sind.</div>
          </div>
          <div id="add-upload-unsupported-mime-type-toast" class="toast">
            <div class="toast-progress-bar bg-danger"></div>
            <div class="toast-header bg-danger text-body-bg">
              <b class="me-auto">Nicht unterstütztes Format</b>
              <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
            </div>
            <div class="toast-body">Das Dateiformat ist nicht unterstützt. Kontaktiere uns, wenn dir eine Unterstützung wichtig ist.</div>
          </div>
          <div id="add-upload-size-limit-exceeded-toast" class="toast">
            <div class="toast-progress-bar bg-danger"></div>
            <div class="toast-header bg-danger text-body-bg">
              <b class="me-auto">Zu große Datei</b>
              <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
            </div>
            <div class="toast-body">Die Datei ist zu groß. Es ist nur möglich, Dateien von maximal 15MB hochzuladen.</div>
          </div>
          <div id="edit-upload-success-toast" class="toast">
            <div class="toast-progress-bar bg-success"></div>
            <div class="toast-header bg-success text-body-bg">
              <b class="me-auto">Erfolgreich geändert</b>
              <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
            </div>
            <div class="toast-body">Das Ereignis wurde erfolgreich geändert.</div>
          </div>
          <div id="delete-upload-success-toast" class="toast">
            <div class="toast-progress-bar bg-success"></div>
            <div class="toast-header bg-success text-body-bg">
              <b class="me-auto">Erfolgreich gelöscht</b>
              <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
            </div>
            <div class="toast-body">Die Datei wurde erfolgreich gelöscht.</div>
          </div>
          <div id="delete-upload-confirm-toast" class="toast" data-bs-autohide="false">
            <div class="toast-header bg-primary text-body-bg">
              <b class="me-auto">Bitte bestätigen</b>
              <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
            </div>
            <div class="toast-body">
              Möchtest du die Datei wirklich löschen?
              <div class="mt-2 pt-2 border-top">
                <div class="row g-2 justify-content-end">
                  <div class="col-auto">
                    <button type="button" class="btn btn-secondary btn-sm fw-semibold" data-bs-dismiss="toast">Abbrechen</button>
                  </div>
                  <div class="col-auto">
                    <button type="button" class="btn btn-primary btn-sm fw-semibold" data-bs-dismiss="toast" id="delete-upload-confirm-toast-button">
                      Löschen
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
