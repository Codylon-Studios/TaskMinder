<nav class="navbar bg-body-tertiary fixed-top">
  <div class="container-fluid position-relative">
    <button class="btn btn-semivisible" data-bs-toggle="offcanvas" data-bs-target="#navbar-offcanvas" aria-label="Mehr Links anzeigen">
      <i class="fas fa-bars" aria-hidden="true"></i>
    </button>

    <div class="d-flex justify-content-between align-items-center flex-grow-1">
      <div class="d-lg-none text-center flex-grow-1">
        <a class="navbar-text fs-5 text-decoration-none navbar-home-link position-absolute top-50 start-50 translate-middle" href="/" data-pjax>
          TaskMinder
        </a>
      </div>
      <a class="d-none d-lg-block navbar-text fs-5 text-decoration-none ms-2 me-4 navbar-home-link" href="/" data-pjax>TaskMinder</a>
      <ul class="navbar-nav d-none d-lg-flex flex-row me-auto">
        <li class="nav-item me-3 class-joined-content">
          <a class="nav-link" href="/homework" data-pjax>Hausaufgaben</a>
        </li>
        <li class="nav-item me-3 class-joined-content">
          <a class="nav-link" href="/uploads" data-pjax>Dateien</a>
        </li>
        <li class="nav-item me-3 class-joined-content">
          <a class="nav-link" href="/events" data-pjax>Ereignisse</a>
        </li>
        <li class="nav-item me-3">
          <a class="nav-link" href="/settings" data-pjax>Einstellungen</a>
        </li>
      </ul>
    </div>

    <button
      class="btn btn-semivisible"
      id="login-register-button"
      data-bs-toggle="modal"
      data-bs-target="#login-register-modal"
      aria-label="Anmelden oder Registrieren"
    >
      <i class="fa-solid fa-right-to-bracket" aria-hidden="true"></i>
    </button>

    <button class="btn btn-semivisible" id="nav-logout-button" aria-label="Abmelden">
      <i class="fa-solid fa-right-from-bracket" aria-hidden="true"></i>
    </button>

    <div class="position-relative" id="offline-wrapper">
      <button class="btn btn-semivisible" aria-label="Offline" id="offline-hint">
        <span class="fa-stack fa-stack-normal">
          <i class="fas fa-wifi text-danger fa-stack-1x" aria-hidden="true"></i>
          <i class="fas fa-slash text-danger fa-stack-1x" aria-hidden="true"></i>
        </span>
        <span class="offline-queue-length" id="offline-queue-circle">3</span>
      </button>
      <div id="offline-popup">
        <div class="text-center text-danger fw-bold text-nowrap">Du bist offline</div>
        <div class="form-text">
          Wir können dir nur einige Seiten anzeigen, die Daten können veraltet sein und du kannst nur manche Informationen ändern.
        </div>
        <div class="text-center text-danger fw-bold text-nowrap" id="offline-queue-title">
          Warteschlange (
          <span class="offline-queue-length">0</span>
          )
        </div>
        <div class="form-text" id="offline-queue-description">
          Diese Änderungen werden durchgeführt, wenn du wieder online bist:
          <ul class="mb-0 ps-3" id="offline-queue-list"></ul>
        </div>
      </div>
    </div>
    <button class="btn btn-semivisible" id="navbar-reload-button" aria-label="Daten neu laden">
      <i class="fas fa-rotate" aria-hidden="true"></i>
    </button>
  </div>
</nav>

<div class="offcanvas offcanvas-start" tabindex="-1" id="navbar-offcanvas" aria-labelledby="navbar-offcanvas-label">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title" id="navbar-offcanvas-label">TaskMinder</h3>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Schließen"></button>
  </div>
  <div class="offcanvas-body">
    <div class="mb-3 text-center" id="offcanvas-account">
      <h5>
        Willkommen,
        <b id="offcanvas-account-name">a26b25c24</b>
        !
      </h5>
      <button class="btn btn-primary fw-bold" id="offcanvas-account-logout-button">
        <i class="fa-solid fa-right-from-bracket" aria-hidden="true"></i>
        Abmelden
      </button>
    </div>

    <i class="fas fa-info-circle fs-5 text-secondary" aria-hidden="true"></i>
    <a href="/about" data-pjax>Über TaskMinder</a>
    <div class="form-text mb-3">Rechtliche Hinweise & allgemeine Infos</div>

    <i class="fab fa-discord fs-5 text-secondary" aria-hidden="true"></i>
    <a href="https://discord.gg/kZGs92aMae" target="_blank">Discord</a>
    <div class="form-text mb-3">Wichtige Updates, direkter Support & Community</div>

    <i class="fab fa-whatsapp fs-5 text-secondary" aria-hidden="true"></i>
    <a href="https://whatsapp.com/channel/0029VbAtPJCDOQIS6Ge1ph3I" target="_blank">WhatsApp-Kanal</a>
    <div class="form-text mb-3">Wichtige Updates direkt auf deinem Handy</div>

    <i class="fas fa-mug-hot fs-5 text-secondary" aria-hidden="true"></i>
    <a href="https://ko-fi.com/taskminder" target="_blank">Ko-Fi</a>
    <div class="form-text">Unterstütze TaskMinder finanziell!</div>
  </div>
</div>

<div class="modal fade" id="request-queue-cleared-modal" tabindex="-1" aria-labelledby="request-queue-cleared-modal-title">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="request-queue-cleared-modal-title">Änderungen, während du offline warst</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
      </div>
      <div class="modal-body">
        <div class="mb-2">Du hast diese Änderungen gemacht, während du offline warst. Hier siehst du, ob sie erfolgreich waren.</div>
        <ul class="list-group" id="request-queue-cleared-modal-list"></ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary fw-bold flex-fill" data-bs-dismiss="modal">Fertig</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="login-register-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 login-register-element">Anmelden oder Registrieren</h1>
        <h1 class="modal-title fs-5 d-none login-element">Willkommen zurück!</h1>
        <h1 class="modal-title fs-5 d-none register-element">Registriere dich!</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Schließen"></button>
      </div>
      <div class="modal-body">
        <div id="login-register-content" class="login-register-element">
          <div class="alert alert-primary p-2 d-flex align-items-center gap-2 w-100">
            <i class="fa-solid fa-lightbulb mx-1" aria-hidden="true"></i>
            <span class="d-block me-1">
              Schon angemeldet? Gib deinen Nutzernamen ein!
              <br />
              Noch kein Account? Gib deinen Wunschnamen ein!
            </span>
          </div>
          <div class="alert alert-danger p-2 d-none align-items-center gap-2 login-register-error-invalid-username">
            <i class="fa-solid fa-circle-exclamation mx-1" aria-hidden="true"></i>
            <span class="d-block">Dieser Nutzername ist nicht möglich. Bitte benutze 4 bis 20 Buchstaben, Zahlen oder Unterstriche.</span>
          </div>
          <label for="navbar-login-register-username" class="form-label">Gib deinen Nutzer-/Wunschnamen ein</label>
          <input type="text" class="form-control login-register-username" id="navbar-login-register-username" />
        </div>
        <div id="login-content" class="d-none login-element">
          <div class="alert alert-danger p-2 d-none align-items-center gap-2 login-error-invalid-password">
            <i class="fa-solid fa-circle-exclamation mx-1" aria-hidden="true"></i>
            <span class="d-block">Das Passwort ist falsch!</span>
          </div>
          <label for="navbar-login-password" class="form-label">Gib dein Passwort ein</label>
          <input type="password" class="form-control login-password" id="navbar-login-password" />
          <div class="form-text">Wolltest du dich registrieren? Dieser Nutzername ist leider schon vergeben. Aber es gibt noch genug andere!</div>
        </div>
        <div id="register-content" class="d-none register-element">
          <div class="alert alert-danger p-2 d-none align-items-center gap-2 register-error-no-matching-passwords">
            <i class="fa-solid fa-circle-exclamation mx-1" aria-hidden="true"></i>
            <span class="d-block">Die Passwörter stimmen nicht überein!</span>
          </div>
          <div class="alert alert-warning p-2 d-none align-items-center gap-2 register-error-insecure-password">
            <i class="fa-solid fa-triangle-exclamation mx-1" aria-hidden="true"></i>
            <span class="d-block">Das Passwort ist nicht sehr sicher!</span>
          </div>
          <div class="mb-3">
            <label for="navbar-register-password" class="form-label">Gib dein Passwort ein</label>
            <input type="password" class="form-control register-password" id="navbar-register-password" />
            <div class="form-text">Denk daran, ein sicheres Passwort zu nehmen</div>
          </div>
          <div class="mb-3">
            <input type="password" class="form-control register-password-repeat" />
            <div class="form-text">Gib es noch mal ein</div>
          </div>
          <div class="form-check">
            <input class="form-check-input mt-2 register-checkbox" type="checkbox" id="navbar-register-checkbox" />
            <label class="form-check-label" for="navbar-register-checkbox">
              <div class="form-text">
                Ich bin mindestens 16 Jahre alt oder habe die Einverständnis meiner Erziehungsberechtigten, einen Account zu erstellen. Ich habe die
                <a href="/about#privacy-policy" target="_blank" data-pjax>Datenschutzerklärung</a>
                und
                <a href="/about#terms-of-use" target="_blank" data-pjax>Nutzungsbedingungen</a>
                gelesen und akzeptiert.
              </div>
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary d-none login-register-back-button fw-bold">Zurück</button>
        <button type="button" class="btn btn-secondary fw-bold" data-bs-dismiss="modal">Abbrechen</button>
        <button type="button" class="btn btn-primary login-register-next-button fw-bold" id="navbar-login-register-next-button">Weiter</button>
        <button type="button" class="btn btn-primary d-none login-element login-button fw-bold">Anmelden</button>
        <button type="button" class="btn btn-primary d-none register-element register-button fw-bold">Registrieren</button>
      </div>
    </div>
  </div>
</div>

<div class="toast-container">
  <div id="error-server-toast" class="toast">
    <div class="toast-progress-bar bg-danger"></div>
    <div class="toast-header bg-danger text-body-bg">
      <b class="me-auto">Serverproblem</b>
      <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
    </div>
    <div class="toast-body">Unser Server hat gerade Probleme. Bitte versuche es später erneut.</div>
  </div>
  <div id="unknown-error-toast" class="toast">
    <div class="toast-progress-bar bg-danger"></div>
    <div class="toast-header bg-danger text-body-bg">
      <b class="me-auto">Unerwarteter Fehler</b>
      <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
    </div>
    <div class="toast-body">Ein unbekannter Fehler ist aufgetreten.</div>
  </div>
  <div id="not-logged-in-toast" class="toast">
    <div class="toast-progress-bar bg-danger"></div>
    <div class="toast-header bg-danger text-body-bg">
      <b class="me-auto">Nicht angemeldet</b>
      <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
    </div>
    <div class="toast-body">Du musst dafür angemeldet sein.</div>
  </div>
  <div id="login-success-toast" class="toast">
    <div class="toast-progress-bar bg-success"></div>
    <div class="toast-header bg-success text-body-bg">
      <b class="me-auto">Erfolgreich angemeldet</b>
      <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
    </div>
    <div class="toast-body">
      Willkommen zurück
      <b class="username">User</b>
      !
    </div>
  </div>
  <div id="register-success-toast" class="toast">
    <div class="toast-progress-bar bg-success"></div>
    <div class="toast-header bg-success text-body-bg">
      <b class="me-auto">Erfolgreich registriert</b>
      <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
    </div>
    <div class="toast-body">
      Willkommen
      <b class="username">User</b>
      !
    </div>
  </div>
  <div id="logout-success-toast" class="toast">
    <div class="toast-progress-bar bg-success"></div>
    <div class="toast-header bg-success text-body-bg">
      <b class="me-auto">Erfolgreich abgemeldet</b>
      <button type="button" class="btn-close btn-close-invert" data-bs-dismiss="toast" aria-label="Schließen"></button>
    </div>
    <div class="toast-body">Auf Wiedersehen!</div>
  </div>
</div>
